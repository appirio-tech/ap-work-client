- var scripts = []
- scripts.push('/app.module')
- scripts.push('/blocks/exception/exception.module')
- scripts.push('/blocks/logger/logger.module')
- scripts.push('/blocks/router/router.module')
- scripts.push('/core/resource/resource.module')
- scripts.push('/core/core.module')
- scripts.push('/layout/scripts/layout.module')
- scripts.push('/core/resource/resource.api.service')
- scripts.push('/core/resource/resource.data.provider')
- scripts.push('/templates')
- scripts.push('/constants')
- scripts.push('/core/ng-enter.directive')
- scripts.push('/layout/scripts/focus-on-click.directive')
- scripts.push('/layout/scripts/layout-header.directive')
- scripts.push('/layout/scripts/header-nav.directive')
- scripts.push('/layout/scripts/project-nav.directive')
- scripts.push('/blocks/exception/exception-handler.provider')
- scripts.push('/blocks/exception/exception')
- scripts.push('/blocks/logger/logger')
- scripts.push('/blocks/router/router-helper.provider')
- scripts.push('/core/config')
- scripts.push('/core/core.constants')
- scripts.push('/core/core.route')
- scripts.push('/scripts/messaging.controller')

- var css = []
- var landscapeCSS = []
- var desktopCSS = []

//- Layout
- scripts.push('/layout/scripts/modal.directive')
- scripts.push('/layout/scripts/homeLink.directive')

- css.push("/layout/styles/project-nav")
- css.push("/layout/styles/main")
- css.push("/layout/styles/header")
- css.push("/layout/styles/footer")
- css.push("/layout/styles/modal")
- css.push("/layout/styles/form")

- landscapeCSS.push("/layout/styles/header.landscape")
- landscapeCSS.push("/layout/styles/main.landscape")

- desktopCSS.push("/layout/styles/main.desktop")
- desktopCSS.push("/layout/styles/form.desktop")

//- Getting Started
- css.push("/getting-started/styles/getting-started")
- desktopCSS.push("/getting-started/styles/getting-started.desktop")
- scripts.push('/getting-started/scripts/getting-started.module')
- scripts.push('/getting-started/scripts/getting-started.route')
- scripts.push('/getting-started/scripts/getting-started.controller')

//- Auth
- scripts.push("/auth/scripts/auth.module")
- scripts.push("/auth/scripts/auth.routes")
- scripts.push("/auth/scripts/login.controller")
- scripts.push("/auth/scripts/login.directive")
- scripts.push("/auth/scripts/register.controller")
- css.push("/auth/styles/login")
- css.push("/auth/styles/register")

//- work request
- scripts.push("/work-request/work-request.module")

//- manage
include manage/manage-includes

- scripts      = scripts.concat(jsFiles)
- css          = css.concat(cssFiles)
- landscapeCSS = landscapeCSS.concat(landscapeFiles)
- desktopCSS   = desktopCSS.concat(desktopFiles)

//- submit work
include submit-work/includes

- scripts      = scripts.concat(jsFiles)
- css          = css.concat(cssFiles)
- landscapeCSS = landscapeCSS.concat(landscapeFiles)
- desktopCSS   = desktopCSS.concat(desktopFiles)

//- timeline
- scripts.push('/bower_components/appirio-tech-timeline/dist/main')
- css.push('/bower_components/appirio-tech-timeline/dist/main')
- landscapeCSS.push('/bower_components/appirio-tech-timeline/dist/main.landscape')

//- ng auth
- scripts.push('/bower_components/appirio-tech-ng-auth/dist/main')

//- messaging
- scripts.push('/bower_components/appirio-tech-messaging/dist/main')
- css.push('/bower_components/appirio-tech-messaging/dist/main')
- css.push('/styles/messaging')

include bowers

doctype html
html(ng-app='app')
  head
    //- This helps the ng-show/ng-hide animations start at the right place.
    //- Since Angular has this but needs to load, this gives us the class early.
    style.
      .ng-hide {
        display: none !important;
      }

    // removeIf(production)
    script(type="text/javascript", src="/json-fixtures.js")

    script(type="text/javascript", src="/bower_components/sinon/index.js")

    script(type="text/javascript", src="/bower_components/auto-config-fake-server/dist/auto-config-fake-server.js")

    script(type="text/javascript").
      AutoConfigFakeServer.init();

      AutoConfigFakeServer.fakeServer.autoRespond = true;

      AutoConfigFakeServer.consume([
        FIXTURES['bower_components/appirio-tech-api-schemas/v3.json'],
        FIXTURES['bower_components/appirio-tech-api-schemas/v2.json'],
        FIXTURES['bower_components/appirio-tech-api-schemas/v3-threads.json'],
        FIXTURES['bower_components/appirio-tech-api-schemas/v3-messages.json']

      ]);
    // endRemoveIf(production)

    title(ng-bind='title') Appiro Work Platform

    meta(charset='utf-8')

    meta(http-equiv='X-UA-Compatible', content='IE=edge, chrome=1')

    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no')

    include ../../../bower_components/ap-newrelic/browser/script

    base(href=basePath)

    = "\n"
    // build:css styles/lib.css
    = "\n"
    each path in bowercss
      = "\n"
      link(href=path + ".css", rel="stylesheet")
      = "\n"
    = "\n"
    // endbuild
    = "\n"
    = "\n"
    // build:css styles/app.css
    = "\n"
    each path in css
      = "\n"
      link(href=path + ".css", rel="stylesheet")
      = "\n"
    = "\n"
    // endbuild
    = "\n"
    = "\n"
    // build:css styles/mobile-landscape.css media="(min-width: 568px)"
    = "\n"
    each path in landscapeCSS
      = "\n"
      link(href=path + ".css", rel="stylesheet", media="(min-width: 568px)")
      = "\n"
    = "\n"
    // endbuild
    = "\n"
    = "\n"
    // build:css styles/desktop.css media="(min-width: 767px)"
    = "\n"
    each path in desktopCSS
      = "\n"
      link(href=path + ".css", rel="stylesheet", media="(min-width: 767px)")
      = "\n"
    = "\n"
    // endbuild
    = "\n"
  body
    include layout/views/shell.jade

    = "\n"
    // build:js js/lib.js
    = "\n"
    each path in bowers
      = "\n"
      script(src= path + ".js", type="text/javascript")
      = "\n"
    = "\n"
    // endbuild
    = "\n"

    = "\n"
    // build:js js/app.js
    = "\n"
    each path in scripts
      = "\n"
      script(src=path + ".js", type="text/javascript")
      = "\n"
    = "\n"
    // endbuild
    = "\n"