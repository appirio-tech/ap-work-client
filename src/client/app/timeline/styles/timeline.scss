@import "../../core/styles/combined";
@import "bourbon";
@import "neat";

.layout-main.timeline {
  padding: $padding-15 $padding-20;

  > ul {
    position: relative;
    margin-top: 40px;

    li {
      $point-width      : 27px;
      $big-point-width  : 37px;
      $timeline-width   : 3px;
      $spacing          : 20px;
      $head-width       : $point-width/2 + $timeline-width/2;
      $head-width-big   : $big-point-width/2 + $timeline-width/2;
      $checkpoint-height: $head-width-big + 8px * 2;
      $lead-after-width : 10px;

      border-left   : $timeline-width solid grey;
      color         : grey;
      padding-bottom: $point-width;
      margin-left   : $head-width-big;

      .checkpoint {
        display    : inline-block;
        margin-top : -$checkpoint-height - $head-width-big;
        margin-left: -$head-width;
        white-space: nowrap;

        > * {
          display       : inline-block;
          vertical-align: middle;
        }

        .progress, .lead {
          display: none;
        }

        .lead-after {
          border-top   : $lead-after-width solid transparent;
          border-bottom: $lead-after-width solid transparent;
          border-right : $lead-after-width solid blue;
          margin-left  : $spacing;
          visibility   : hidden;
        }

        .point {
          width           : $point-width;
          height          : $point-width;
          line-height     : $point-width - 3px * 2;
          border          : 3px solid white;
          border-radius   : 50%;
          background-color: grey;
          text-align      : center;
          color           : $white;

          .info {
            display: none;
          }
        }

        label {
          margin-left: -3px;
          padding    : 5px;
          white-space: initial;
        }
      }

      > *:nth-child(n + 2) {
        margin-left: $spacing + $head-width-big + $lead-after-width;
      }

      > p:nth-child(n + 2) {
        margin-top: 10px;
      }

      &.milestone {
        .checkpoint {
          margin-left: -$head-width-big;
        }

        .point {
          margin: 8px 0;
          width : $big-point-width;
          height: $big-point-width;
        }
      }

      &.completed {
        border-color: green;

        .point {
          background-color: green;
        }

        .progress {
          .percent {
            color: green;
          }
        }
      }

      &.info {
        .checkpoint {
          .point {
            background-color: blue;

            .info {
              display: block;
            }
          }
          .lead-after {
            visibility: visible;
          }
        }

        a {
          color: blue;
        }

        label {
          $arrow-size: 10px;

          background-color: blue;
          color: white;
        }
      }
    }
  }
}
